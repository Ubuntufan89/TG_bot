# Бот технической поддержки для Redmine

## Описание проекта
Бот технической поддержки представляет собой Telegram-бота, который позволяет пользователям создавать тикеты в системе Redmine и отслеживать их статус. Бот обеспечивает удобный интерфейс для взаимодействия с системой поддержки через Telegram.

## Функциональность
- Создание тикетов с прикреплением файлов
- Проверка статуса существующих тикетов
- Доступ к базе знаний
- Поддержка различных форматов файлов (PDF, DOC, DOCX, XLS, XLSX, JPG, PNG)

## Технические требования
- Python 3.8 или выше
- Доступ к API Redmine
- Telegram Bot Token
- Доступ к интернету

## Зависимости
```
python-telegram-bot>=20.0
requests>=2.31.0
python-dotenv>=1.0.0
urllib3>=2.0.0
```

## Установка и настройка

### 1. Клонирование репозитория
```bash
git clone [URL репозитория]
cd support_bot
```

### 2. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения
Создайте файл `.env` в корневой директории проекта со следующим содержимым:
```
TELEGRAM_TOKEN=your_telegram_token
SERVICE_API_TOKEN=your_redmine_api_token
SERVICE_API_URL=https://your-redmine-instance.com
```

### 4. Создание директории для логов
```bash
mkdir -p logs
```

## Запуск бота

### Обычный режим
```bash
python3 support_bot.py
```

### Тестовый режим
```bash
python3 support_bot.py --no-bot
```

## Структура проекта
```
support_bot/
├── support_bot.py      # Основной файл бота
├── requirements.txt    # Зависимости проекта
├── .env               # Конфигурация (не включена в репозиторий)
├── logs/              # Директория для логов
└── README.md          # Документация проекта
```

## Процесс создания тикета
1. Пользователь запускает бота командой `/start`
2. Выбирает "Создать тикет"
3. Вводит тему обращения
4. Описывает проблему
5. Указывает название компании
6. Вводит ИНН компании
7. Вводит свое имя
8. Вводит свою фамилию
9. При необходимости прикрепляет файлы
10. Получает номер созданного тикета

## Проверка статуса тикета
1. Пользователь выбирает "Проверить статус"
2. Вводит номер тикета
3. Получает информацию о текущем статусе тикета

## Обработка ошибок
- Бот автоматически обрабатывает ошибки API
- Ведется логирование всех ошибок
- Пользователь получает понятные сообщения об ошибках
- Реализована система повторных попыток при сбоях API

## Безопасность
- Все токены хранятся в переменных окружения
- Реализована проверка форматов вводимых данных
- Ограничен доступ к API через токены
- Ведется логирование действий

## Логирование
Логи сохраняются в директории `logs/` в файле `support_bot.log` и содержат:
- Информацию о запуске/остановке бота
- Ошибки и предупреждения
- Статусы API-запросов
- Информацию о созданных тикетах

## Ограничения
- Максимальный размер загружаемых файлов определяется настройками Redmine
- Поддерживаются только определенные форматы файлов
- ИНН должен содержать 10 цифр
- Имя и фамилия должны содержать только буквы

## Поддержка и сопровождение
При возникновении проблем:
1. Проверьте логи в директории `logs/`
2. Убедитесь в правильности настроек в файле `.env`
3. Проверьте доступность API Redmine
4. Обратитесь к администратору системы

## Авторы
- [Ваше имя/организация]

## Лицензия
[Укажите тип лицензии] # TG_bot
